<!-- tools/calc.html -->
<div id="calcContainer" class="bg-pigeon-card p-6 rounded-lg shadow-lg text-text-primary mx-auto">
  <input id="calcInput" type="text" class="w-full p-3 mb-4 bg-pigeon-dark rounded border border-border-light text-xl text-right placeholder-text-muted" placeholder="0" readonly />
  <div class="grid grid-cols-4 gap-3">
    <button class="btn">7</button>
    <button class="btn">8</button>
    <button class="btn">9</button>
    <button class="btn text-brand-yellow hover:text-brand-yellow-hover">/</button>
    
    <button class="btn">4</button>
    <button class="btn">5</button>
    <button class="btn">6</button>
    <button class="btn text-brand-yellow hover:text-brand-yellow-hover">*</button>
    
    <button class="btn">1</button>
    <button class="btn">2</button>
    <button class="btn">3</button>
    <button class="btn text-brand-yellow hover:text-brand-yellow-hover">-</button>
    
    <button class="btn">0</button>
    <button class="btn">.</button>
    <button class="btn text-accent-red hover:text-accent-red" data-clear>C</button>
    <button class="btn text-brand-yellow hover:text-brand-yellow-hover">+</button>
    
    <button class="btn col-span-4 bg-brand-yellow text-pigeon-darker font-bold hover:bg-brand-yellow-hover" data-equals>=</button>
  </div>
</div>

<script>
  function initCalculator(scope) {
    const input = scope.querySelector('#calcInput');
    const buttons = scope.querySelectorAll('.btn');
    let expression = '';

    buttons.forEach(button => {
      button.addEventListener('click', () => {
        const val = button.textContent.trim();

        if (val === 'C') {
          expression = '';
          input.value = '0';
        } else if (val === '=') {
          try {
            expression = eval(expression).toString();
            input.value = expression;
          } catch {
            input.value = 'Hata';
            expression = '';
          }
        } else {
          expression += val;
          input.value = expression;
        }
      });
    });
  }
</script>
